<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æå…‰é¢„è­¦è§‚æµ‹ç›´æ’­</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            aurora: {
              blue: '#4096ff',
              green: '#52c41a',
              orange: '#fa8c16',
              red: '#f5222d',
              purple: '#722ed1',
              pink: '#ff4d4f',
              dark: '#141414'
            }
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .text-shadow {
        text-shadow: 0 2px 4px rgba(0,0,0,0.8);
      }
      .text-shadow-heavy {
        text-shadow: 0 1px 3px rgba(0,0,0,0.9), 0 0 2px rgba(0,0,0,0.7);
      }
      .bg-blur {
        backdrop-filter: blur(6px);
      }
      .glass-effect {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.15);
      }
      .live-pulse {
        animation: pulse 4s infinite;
      }
      .warning-pulse {
        animation: warning 4s infinite;
      }
     
      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.6; }
        100% { opacity: 1; }
      }
      @keyframes warning {
        0% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.7; transform: scale(1.05); }
        100% { opacity: 1; transform: scale(1); }
      }
      @keyframes medium {
        0% { opacity: 1; }
        50% { opacity: 0.6; }
        100% { opacity: 1; }
      }
      @keyframes high {
        0% { opacity: 1; }
        50% { opacity: 0.4; }
        100% { opacity: 1; }
      }
      @keyframes region {
        0% { box-shadow: 0 0 5px rgba(250, 140, 22, 0); }
        50% { box-shadow: 0 0 15px rgba(250, 140, 22, 0.8); }
        100% { box-shadow: 0 0 5px rgba(250, 140, 22, 0); }
      }
      @keyframes region-high {
        0% { box-shadow: 0 0 5px rgba(245, 34, 45, 0); }
        50% { box-shadow: 0 0 20px rgba(245, 34, 45, 0.9); }
        100% { box-shadow: 0 0 5px rgba(245, 34, 45, 0); }
      }
    }
  </style>
</head>
<body class="bg-transparent overflow-hidden">
  <!-- æ”¹ä¸ºç§»åŠ¨ç«¯å‹å¥½çš„å‚ç›´å¸ƒå±€ -->
  <div class="min-h-screen bg-gradient-to-br from-gray-900 to-blue-900 p-4">
    
    <!-- é¡¶éƒ¨ä¿¡æ¯æ  -->
    <div class="glass-effect rounded-2xl p-4 mb-4">
      <div class="flex items-center justify-between">
        <!-- Logoå’Œæ—¶é—´ -->
        <div class="flex items-center">
          <div class="w-12 h-12 bg-gradient-to-r from-aurora-blue to-aurora-purple rounded-full flex items-center justify-center mr-3">
            <i class="fa fa-bolt text-white text-lg"></i>
          </div>
          <div>
            <div class="text-white font-bold text-shadow">æå…‰é¢„è­¦è§‚æµ‹</div>
            <div id="datetime" class="text-white text-sm text-shadow-heavy">2025/09/30 12:34:56</div>
          </div>
        </div>
        
        <!-- ç›´æ’­çŠ¶æ€å’ŒKPæŒ‡æ•° -->
        <div class="flex items-center space-x-2">
          <span class="inline-flex items-center justify-center w-8 h-8 bg-aurora-pink rounded-full live-pulse">
            <i class="fa fa-circle text-[8px] text-white"></i>
          </span>
          <div id="kp-display" class="text-aurora-orange font-bold text-shadow">KP: --</div>
        </div>
      </div>
    </div>

    <!-- é¢„è­¦æ¡å¹… -->
    <div id="warning-text" class="glass-effect rounded-xl p-3 mb-4 text-center warning-pulse">
      <div class="text-white text-base font-bold text-shadow-heavy">
        æå…‰æ´»åŠ¨é¢„è­¦ï¼šå½“å‰è§‚æµ‹åŒºåŸŸå¯èƒ½å‡ºç°æå…‰ç°è±¡
      </div>
    </div>

    <!-- æ ¸å¿ƒé¢„æŠ¥ä¿¡æ¯ -->
    <div class="glass-effect rounded-2xl p-4 mb-4">
      <div class="flex items-center justify-center mb-3">
        <i class="fa fa-bolt text-aurora-green mr-2" id="wind-speed-icon"></i>
        <span id="forecast-title" class="font-bold text-white text-lg text-shadow">30åˆ†é’Ÿåæå…‰é¢„æŠ¥</span>
      </div>
      
      <!-- å®æ—¶æ•°æ®æŒ‡æ ‡ -->
      <div class="grid grid-cols-3 gap-3 mb-4">
        <div class="text-center">
          <div class="text-aurora-blue text-sm">å¤ªé˜³é£é€Ÿ</div>
          <div id="solar-wind" class="text-white font-bold">-- km/s</div>
        </div>
        <div class="text-center">
          <div class="text-aurora-green text-sm">HPIå¼ºåº¦</div>
          <div id="hpi-power" class="text-white font-bold">--</div>
        </div>
        <div class="text-center">
          <div class="text-aurora-purple text-sm">Bzæ–¹å‘</div>
          <div id="bz-direction" class="text-white font-bold">-- nT</div>
        </div>
      </div>
    </div>

    <!-- åŸå¸‚é¢„æŠ¥ç½‘æ ¼å¸ƒå±€ -->
    <div class="mb-4">
      <div class="flex items-center justify-between mb-3">
        <div class="text-white font-bold text-shadow-heavy">è§‚æµ‹åœ°ç‚¹é¢„æŠ¥</div>
        <div class="text-white text-sm text-shadow-heavy">
          <i class="fa fa-map-marker text-aurora-pink mr-1"></i>
          <span id="live-location">ä¿„ç½—æ–¯Â·åŒ—çº¬53Â°</span>
        </div>
      </div>
      
      <div class="grid grid-cols-2 gap-3">
        <!-- åŸå¸‚1 -->
        <div class="text-center region-container glass-effect p-3 rounded-xl" id="city-arctic">
          <div class="text-white text-base font-semibold mb-1 text-shadow-heavy">åŒ—ææ‘</div>
          <div class="text-white text-sm">
            <span class="text-aurora-green" id="arctic-prob">æ¦‚ç‡: 85%</span><br>
            <span id="arctic-cloud">äº‘é‡: 10%</span><br>
            <span id="arctic-temp">æ¸©åº¦: -8Â°C</span>
          </div>
        </div>
        
        <!-- åŸå¸‚2 -->
        <div class="text-center region-container glass-effect p-3 rounded-xl" id="city-mangui">
          <div class="text-white text-base font-semibold mb-1 text-shadow-heavy">æ»¡å½’é•‡</div>
          <div class="text-white text-sm">
            <span class="text-aurora-green" id="mangui-prob">æ¦‚ç‡: 70%</span><br>
            <span id="mangui-cloud">äº‘é‡: 15%</span><br>
            <span id="mangui-temp">æ¸©åº¦: -10Â°C</span>
          </div>
        </div>
        
        <!-- åŸå¸‚3 -->
        <div class="text-center region-container glass-effect p-3 rounded-xl" id="city-genhe">
          <div class="text-white text-base font-semibold mb-1 text-shadow-heavy">æ ¹æ²³å¸‚</div>
          <div class="text-white text-sm">
            <span class="text-aurora-green" id="genhe-prob">æ¦‚ç‡: 78%</span><br>
            <span id="genhe-cloud">äº‘é‡: 12%</span><br>
            <span id="genhe-temp">æ¸©åº¦: -11Â°C</span>
          </div>
        </div>
        
        <!-- åŸå¸‚4 -->
        <div class="text-center region-container glass-effect p-3 rounded-xl" id="city-eerguna">
          <div class="text-white text-base font-semibold mb-1 text-shadow-heavy">é¢å°”å¤çº³</div>
          <div class="text-white text-sm">
            <span class="text-aurora-green" id="eerguna-prob">æ¦‚ç‡: 90%</span><br>
            <span id="eerguna-cloud">äº‘é‡: 5%</span><br>
            <span id="eerguna-temp">æ¸©åº¦: -15Â°C</span>
          </div>
        </div>
        
        <!-- åŸå¸‚5 -->
        <div class="text-center region-container glass-effect p-3 rounded-xl" id="city-heihe">
          <div class="text-white text-base font-semibold mb-1 text-shadow-heavy">é»‘æ²³å¸‚</div>
          <div class="text-white text-sm">
            <span class="text-aurora-green" id="heihe-prob">æ¦‚ç‡: 65%</span><br>
            <span id="heihe-cloud">äº‘é‡: 20%</span><br>
            <span id="heihe-temp">æ¸©åº¦: -5Â°C</span>
          </div>
        </div>
        
        <!-- åŸå¸‚6 -->
        <div class="text-center region-container glass-effect p-3 rounded-xl" id="city-hegu">
          <div class="text-white text-base font-semibold mb-1 text-shadow-heavy">ç¦¾æœ¨æ‘</div>
          <div class="text-white text-sm">
            <span class="text-aurora-green" id="hegu-prob">æ¦‚ç‡: 80%</span><br>
            <span id="hegu-cloud">äº‘é‡: 12%</span><br>
            <span id="hegu-temp">æ¸©åº¦: -12Â°C</span>
          </div>
        </div>
        
        <!-- åŸå¸‚7 -->
        <div class="text-center region-container glass-effect p-3 rounded-xl" id="city-hailar">
          <div class="text-white text-base font-semibold mb-1 text-shadow-heavy">æµ·æ‹‰å°”</div>
          <div class="text-white text-sm">
            <span class="text-aurora-green" id="hailar-prob">æ¦‚ç‡: 75%</span><br>
            <span id="hailar-cloud">äº‘é‡: 18%</span><br>
            <span id="hailar-temp">æ¸©åº¦: -18Â°C</span>
          </div>
        </div>
        
        <!-- åŸå¸‚8 -->
        <div class="text-center region-container glass-effect p-3 rounded-xl" id="city-zalantun">
          <div class="text-white text-base font-semibold mb-1 text-shadow-heavy">æ‰å…°å±¯</div>
          <div class="text-white text-sm">
            <span class="text-aurora-green" id="zalantun-prob">æ¦‚ç‡: 88%</span><br>
            <span id="zalantun-cloud">äº‘é‡: 8%</span><br>
            <span id="zalantun-temp">æ¸©åº¦: -20Â°C</span>
          </div>
        </div>
      </div>
    </div>

    <!-- åº•éƒ¨ä¿¡æ¯ -->
    <div class="text-center text-gray-400 text-xs mt-4 pb-4">
      <div>æ•°æ®æ›´æ–°äº <span id="last-update">--</span></div>
      <div>æå…‰é¢„è­¦è§‚æµ‹ç³»ç»Ÿ Â© 2025</div>
    </div>
  </div>

  <script>
  // ===================== é…ç½®åŒºåŸŸ ===================== 
  const _0x1a2b = {
    anchorLocation: {
      name: "ä¸­å›½åŒ—éƒ¨åœ°åŒº",
      lat: 53.5,
      lon: 122.3,
      timezone: "Asia/Shanghai"
    },
    
    locations: {
      arctic: { name: "åŒ—ææ‘", lat: 53.5, lon: 122.3, factor: 1.25 },
      heihe: { name: "é»‘æ²³å¸‚", lat: 50.2, lon: 127.5, factor: 1.18 },
      mangui: { name: "æ»¡å½’é•‡", lat: 52.0, lon: 122.0, factor: 1.15 },
      genhe: { name: "æ ¹æ²³å¸‚", lat: 50.8, lon: 121.5, factor: 1.15 },
      eerguna: { name: "é¢å°”å¤çº³", lat: 50.2, lon: 120.2, factor: 1.08 },
      hegu: { name: "ç¦¾æœ¨æ‘", lat: 48.5, lon: 87.4, factor: 0.85 },
      hailar: { name: "æµ·æ‹‰å°”", lat: 49.2, lon: 119.7, factor: 1.05 },
      zalantun: { name: "æ‰å…°å±¯", lat: 48.0, lon: 122.7, factor: 0.90 }
    },
    
    thresholds: {
      probability: {
        low: 30,
        medium: 66
      },
      cloudCover: {
        low: 30,
        medium: 70
      },
      temperature: {
        cold: -20,
        medium: -10
      },
      windSpeed: {
        medium: 500,
        high: 600
      }
    },
    
    auroraRefresh: 2 * 60 * 1000,
    weatherRefresh: 10 * 60 * 1000
  };

  // æ•°æ®çŠ¶æ€
  const _0x2c3d = {
    kpIndex: "--",
    forecastTime: "--",
    globalProb: 0,
    lastUpdate: null,
    hpiPower: 0,
    bzDirection: 0,
    solarWind: 0,
    solarDensity: 0
  };

  // DOMå…ƒç´ ç¼“å­˜
  const _0x3e4f = {
    forecastTitle: document.getElementById('forecast-title'),
    datetime: document.getElementById('datetime'),
    liveLocation: document.getElementById('live-location'),
    warningText: document.getElementById('warning-text'),
    windSpeedIcon: document.getElementById('wind-speed-icon'),
    kpDisplay: document.getElementById('kp-display'),
    lastUpdate: document.getElementById('last-update'),
    solarWind: document.getElementById('solar-wind'),
    hpiPower: document.getElementById('hpi-power'),
    bzDirection: document.getElementById('bz-direction'),
    cities: {
      arctic: {
        container: document.getElementById('city-arctic'),
        prob: document.getElementById('arctic-prob'),
        cloud: document.getElementById('arctic-cloud'),
        temp: document.getElementById('arctic-temp')
      },
      mangui: {
        container: document.getElementById('city-mangui'),
        prob: document.getElementById('mangui-prob'),
        cloud: document.getElementById('mangui-cloud'),
        temp: document.getElementById('mangui-temp')
      },
      genhe: {
        container: document.getElementById('city-genhe'),
        prob: document.getElementById('genhe-prob'),
        cloud: document.getElementById('genhe-cloud'),
        temp: document.getElementById('genhe-temp')
      },
      eerguna: {
        container: document.getElementById('city-eerguna'),
        prob: document.getElementById('eerguna-prob'),
        cloud: document.getElementById('eerguna-cloud'),
        temp: document.getElementById('eerguna-temp')
      },
      heihe: {
        container: document.getElementById('city-heihe'),
        prob: document.getElementById('heihe-prob'),
        cloud: document.getElementById('heihe-cloud'),
        temp: document.getElementById('heihe-temp')
      },
      hegu: {
        container: document.getElementById('city-hegu'),
        prob: document.getElementById('hegu-prob'),
        cloud: document.getElementById('hegu-cloud'),
        temp: document.getElementById('hegu-temp')
      },
      hailar: {
        container: document.getElementById('city-hailar'),
        prob: document.getElementById('hailar-prob'),
        cloud: document.getElementById('hailar-cloud'),
        temp: document.getElementById('hailar-temp')
      },
      zalantun: {
        container: document.getElementById('city-zalantun'),
        prob: document.getElementById('zalantun-prob'),
        cloud: document.getElementById('zalantun-cloud'),
        temp: document.getElementById('zalantun-temp')
      }
    }
  };

  // ===================== å·¥å…·å‡½æ•° ===================== 
  function _0x4a5b(_0x5c6d) {
    if (_0x5c6d) _0x5c6d.className = '';
  }
  
  function _0x5b7c(_0x6d8e) {
    if (_0x6d8e >= _0x1a2b.thresholds.probability.medium) {
      return 'text-aurora-red high-pulse';
    } else if (_0x6d8e >= _0x1a2b.thresholds.probability.low) {
      return 'text-aurora-orange medium-pulse';
    } else {
      return 'text-gray-400';
    }
  }
  
  function _0x6c9d(_0x7eaf) {
    if (_0x7eaf >= _0x1a2b.thresholds.cloudCover.medium) {
      return 'text-aurora-red';
    } else if (_0x7eaf >= _0x1a2b.thresholds.cloudCover.low) {
      return 'text-aurora-orange';
    } else {
      return 'text-aurora-green';
    }
  }
  
  function _0x7dae(_0x8fbf) {
    if (_0x8fbf <= _0x1a2b.thresholds.temperature.cold) {
      return 'text-aurora-blue';
    } else if (_0x8fbf <= _0x1a2b.thresholds.temperature.medium) {
      return 'text-aurora-purple';
    } else {
      return 'text-white';
    }
  }
  
  function _0x8ebf(_0x9fcg) {
    if (_0x9fcg >= _0x1a2b.thresholds.windSpeed.high) {
      return 'text-aurora-red high-pulse';
    } else if (_0x9fcg >= _0x1a2b.thresholds.windSpeed.medium) {
      return 'text-aurora-orange medium-pulse';
    } else {
      return 'text-aurora-green';
    }
  }

  // ===================== æ ¸å¿ƒåŠŸèƒ½ - æ··æ·†çš„æ ¸å¿ƒç®—æ³• ===================== 
  function _0x9fd0() {
    const _0xaf01 = new Date();
    const _0xbf12 = _0xaf01.getFullYear();
    const _0xcf23 = String(_0xaf01.getMonth() + 1).padStart(2, '0');
    const _0xdf34 = String(_0xaf01.getDate()).padStart(2, '0');
    const _0xef45 = String(_0xaf01.getHours()).padStart(2, '0');
    const _0xff56 = String(_0xaf01.getMinutes()).padStart(2, '0');
    const _0x0f67 = String(_0xaf01.getSeconds()).padStart(2, '0');
    
    const _0x1f78 = `${_0xbf12}/${_0xcf23}/${_0xdf34}`;
    const _0x2f89 = `${_0xef45}:${_0xff56}:${_0x0f67}`;
    
    _0x3e4f.datetime.innerHTML = `${_0x1f78} ${_0x2f89}`;
  }

  function _0x3f9a(_0x4aab, _0x5bbc, _0x6ccd, _0x7dde, _0x8eef, _0x9ff0) {
    let _0xaf01 = 0;
    const _0xbf12 = 30;
    
    if (_0x4aab >= 90) _0xaf01 += 35;
    else if (_0x4aab >= 70) _0xaf01 += 25;
    else if (_0x4aab >= 50) _0xaf01 += 15;

    if (_0x6ccd < -15) _0xaf01 += 30;
    else if (_0x6ccd < -10) _0xaf01 += 20;
    else if (_0x6ccd < -5) _0xaf01 += 10;

    if (_0x7dde >= 750) _0xaf01 += 20;
    else if (_0x7dde >= 600) _0xaf01 += 15;
    else if (_0x7dde >= 500) _0xaf01 += 10;
    else if (_0x7dde >= 400) _0xaf01 += 5;

    _0xaf01 += Math.min(5, _0x8eef);

    if (_0xbf12 >= 30) _0xaf01 += 10;
    else if (_0xbf12 >= 20) _0xaf01 += 7;
    else if (_0xbf12 >= 10) _0xaf01 += 3;

    _0xaf01 *= _0x9ff0;

    return Math.min(95, Math.max(5, _0xaf01));
  }

  function _0x4fab() {
    if (_0x2c3d.kpIndex === "--") return;
    
    for (const [_0x5cbc, _0x6dcd] of Object.entries(_0x1a2b.locations)) {
      const _0x7ede = _0x3f9a(
        _0x2c3d.hpiPower || 0,
        30,
        _0x2c3d.bzDirection || 0,
        _0x2c3d.solarWind || 0,
        _0x2c3d.solarDensity || 0,
        _0x6dcd.factor
      );
      
      const _0x8fef = _0x3e4f.cities[_0x5cbc];
      if (!_0x8fef || !_0x8fef.prob) continue;
      
      const _0x9ff0 = _0x7ede < _0x1a2b.thresholds.probability.low 
        ? "æ¦‚ç‡: ä½" 
        : `æ¦‚ç‡: ${Math.round(_0x7ede)}%`;
      
      _0x8fef.prob.textContent = _0x9ff0;
      _0x4a5b(_0x8fef.prob);
      _0x8fef.prob.className = `text-sm font-medium ${_0x5b7c(_0x7ede)} text-shadow-heavy`;
      
      _0x4a5b(_0x8fef.container);
      _0x8fef.container.className = 'text-center region-container glass-effect p-3 rounded-xl';
      if (_0x7ede >= _0x1a2b.thresholds.probability.medium) {
        _0x8fef.container.classList.add('region-high');
      } else if (_0x7ede >= _0x1a2b.thresholds.probability.low) {
        _0x8fef.container.classList.add('region-warning');
      }
    }
    
    let _0xaf01 = 0;
    let _0xbf12 = 0;
    for (const [_0x5cbc, _0x6dcd] of Object.entries(_0x1a2b.locations)) {
      const _0x7ede = _0x3f9a(
        _0x2c3d.hpiPower || 0,
        30,
        _0x2c3d.bzDirection || 0,
        _0x2c3d.solarWind || 0,
        _0x2c3d.solarDensity || 0,
        _0x6dcd.factor
      );
      _0xaf01 += _0x7ede;
      _0xbf12++;
    }
    _0x2c3d.globalProb = Math.round(_0xaf01 / _0xbf12);
    
    _0x3e4f.kpDisplay.textContent = `KP: ${_0x2c3d.kpIndex}`;
    
    _0x6cbd();
    
    if (_0x2c3d.forecastTime !== "--") {
      _0x3e4f.forecastTitle.textContent = `${_0x2c3d.forecastTime}åˆ†é’Ÿåæå…‰é¢„æŠ¥`;
      
      _0x4a5b(_0x3e4f.forecastTitle);
      _0x3e4f.forecastTitle.className = `font-bold text-lg ${_0x8ebf(_0x2c3d.solarWind)} text-shadow`;
      
      _0x4a5b(_0x3e4f.windSpeedIcon);
      _0x3e4f.windSpeedIcon.className = `fa fa-bolt mr-2 ${_0x8ebf(_0x2c3d.solarWind)}`;
    }
  }

  function _0x6cbd() {
    let _0x7dce = "";
    let _0x8edf = "text-white";
    
    if (_0x2c3d.globalProb >= _0x1a2b.thresholds.probability.medium) {
      _0x7dce = `ğŸ”¥ æå…‰å¼ºé¢„è­¦ï¼šç»¼åˆæ¦‚ç‡${_0x2c3d.globalProb}%ï¼Œå…‰æ±¡æŸ“ç­‰çº§â‰¤2çº§åœ°åŒºï¼ˆé»‘æš—å¤œç©ºï¼‰è‚‰çœ¼å¯è§‚æµ‹ï¼Œå»ºè®®å‰å¾€å¼€é˜”æ— é®æŒ¡åŒºåŸŸ`;
      _0x8edf = "text-aurora-red";
    } else if (_0x2c3d.globalProb >= _0x1a2b.thresholds.probability.low) {
      _0x7dce = `âš ï¸ æå…‰é¢„è­¦ï¼šç»¼åˆæ¦‚ç‡${_0x2c3d.globalProb}%ï¼Œæ‰‹æœºæˆ–ç›¸æœºå…·å¤‡æ‹æ‘„å¯èƒ½æ€§ï¼›å»ºè®®åœ¨**å…‰æ±¡æŸ“ç­‰çº§â‰¤2çº§**ï¼ˆæš—ç©ºç¯å¢ƒï¼‰åŒºåŸŸï¼Œé€‰æ‹©å¼€é˜”æ— é®æŒ¡ç‚¹ä½å°è¯•æ‹æ‘„ï¼Œå¯ä¼˜å…ˆæ­é…ä¸‰è„šæ¶æå‡ç”»è´¨`;
      _0x8edf = "text-aurora-orange";
    } else {
      _0x7dce = "å½“å‰æ— æå…‰é¢„è­¦ä¿¡æ¯";
      _0x8edf = "text-gray-300";
    }
    
    _0x3e4f.warningText.textContent = _0x7dce;
    
    _0x4a5b(_0x3e4f.warningText);
    if (_0x2c3d.globalProb >= _0x1a2b.thresholds.probability.medium) {
      _0x3e4f.warningText.className = `${_0x8edf} text-base font-bold text-center high-pulse text-shadow-heavy`;
    } else if (_0x2c3d.globalProb >= _0x1a2b.thresholds.probability.low) {
      _0x3e4f.warningText.className = `${_0x8edf} text-base font-bold text-center medium-pulse text-shadow-heavy`;
    } else {
      _0x3e4f.warningText.className = `${_0x8edf} text-base font-bold text-center text-shadow-heavy`;
    }
  }

  function _0x7dce() {
    for (const [_0x8edf, _0x9ff0] of Object.entries(_0x3e4f.cities)) {
      if (_0x9ff0.cloud) {
        const _0xaf01 = _0x9ff0.cloud.textContent;
        const _0xbf12 = parseInt(_0xaf01.match(/\d+/)[0]);
        _0x4a5b(_0x9ff0.cloud);
        _0x9ff0.cloud.className = `text-sm font-medium ${_0x6c9d(_0xbf12)} text-shadow-heavy`;
      }
      
      if (_0x9ff0.temp) {
        const _0xaf01 = _0x9ff0.temp.textContent;
        const _0xbf12 = parseInt(_0xaf01.match(/-?\d+/)[0]);
        _0x4a5b(_0x9ff0.temp);
        _0x9ff0.temp.className = `text-sm font-medium ${_0x7dae(_0xbf12)} text-shadow-heavy`;
      }
    }
  }

  function _0x8edf() {
    _0x3e4f.liveLocation.textContent = _0x1a2b.anchorLocation.name;
    _0x4fab();
    _0x7dce();
    
    if (_0x3e4f.solarWind) _0x3e4f.solarWind.textContent = `${_0x2c3d.solarWind} km/s`;
    if (_0x3e4f.hpiPower) _0x3e4f.hpiPower.textContent = _0x2c3d.hpiPower;
    if (_0x3e4f.bzDirection) _0x3e4f.bzDirection.textContent = `${_0x2c3d.bzDirection} nT`;
    
    _0x2c3d.lastUpdate = new Date().toLocaleTimeString();
    if (_0x3e4f.lastUpdate) _0x3e4f.lastUpdate.textContent = _0x2c3d.lastUpdate;
  }

  // ===================== APIè°ƒç”¨å‡½æ•°ï¼ˆä¿æŒæ¸…æ™°ï¼Œé¿å…æ··æ·†ï¼‰ ===================== 
  async function fetchAuroraData() {
    try {
      // è·å–KPæŒ‡æ•°
      try {
        const kpRes = await fetch('https://services.swpc.noaa.gov/json/planetary_k_index_1m.json');
        const kpData = await kpRes.json();
        if (kpData?.length > 0) {
          const latestKp = kpData[kpData.length - 1];
          _0x2c3d.kpIndex = latestKp.estimated_kp?.toFixed(1) || "--";
        }
      } catch (e) {
        console.warn("KPæŒ‡æ•°è·å–å¤±è´¥", e);
      }
      
      // è·å–å¤ªé˜³é£æ•°æ®
      try {
        const plasmaRes = await fetch('https://services.swpc.noaa.gov/products/solar-wind/plasma-2-hour.json');
        const plasmaData = await plasmaRes.json();
        
        if (Array.isArray(plasmaData) && plasmaData.length > 1) {
          const headers = plasmaData[0];
          const speedIndex = headers.indexOf("speed");
          const densityIndex = headers.indexOf("density");
          const latest = plasmaData[plasmaData.length - 1];
          
          if (speedIndex !== -1 && latest[speedIndex]) {
            _0x2c3d.solarWind = parseFloat(latest[speedIndex]);
            _0x2c3d.solarDensity = parseFloat(latest[densityIndex]);
            
            const distanceKm = 1500000;
            const delayMinutes = 2;
            const arrivalTimeMinutes = Math.round((distanceKm / _0x2c3d.solarWind / 60) + delayMinutes);
            _0x2c3d.forecastTime = arrivalTimeMinutes;
          }
        }
      } catch (e) {
        console.warn("å¤ªé˜³é£æ•°æ®è·å–å¤±è´¥", e);
      }
      
      // è·å–HPIå¼ºåº¦
      try {
        const hpiRes = await fetch('https://services.swpc.noaa.gov/text/aurora-nowcast-hemi-power.txt');
        const hpiText = await hpiRes.text();
        const validLines = hpiText.trim().split("\n").filter(line => !line.startsWith("#"));
        if (validLines.length > 0) {
          const lastLine = validLines[validLines.length - 1];
          const columns = lastLine.split(/\s+/).filter(Boolean);
          if (columns.length >= 3) {
            _0x2c3d.hpiPower = parseFloat(columns[2]) || 0;
          }
        }
      } catch (e) {
        console.warn("HPIå¼ºåº¦è·å–å¤±è´¥", e);
      }
      
      // è·å–Bzæ–¹å‘
      try {
        const magRes = await fetch('https://services.swpc.noaa.gov/products/solar-wind/mag-2-hour.json');
        const magData = await magRes.json();
        
        if (Array.isArray(magData) && magData.length > 1) {
          const headers = magData[0];
          const bzIndex = headers.indexOf("bz_gsm");
          const latest = magData[magData.length - 1];
          
          if (bzIndex !== -1) {
            _0x2c3d.bzDirection = latest[bzIndex] ? parseFloat(latest[bzIndex]) : 0;
          }
        }
      } catch (e) {
        console.warn("Bzæ–¹å‘è·å–å¤±è´¥", e);
      }
      
      _0x8edf();
      
    } catch (error) {
      console.error("æå…‰æ•°æ®è·å–é”™è¯¯:", error);
    }
  }

  async function fetchWeather() {
    try {
      for (const [key, loc] of Object.entries(_0x1a2b.locations)) {
        try {
          const apiUrl = `https://api.open-meteo.com/v1/forecast?latitude=${loc.lat}&longitude=${loc.lon}&current=temperature_2m,cloud_cover&timezone=auto`;
          const response = await fetch(apiUrl);
          const data = await response.json();
          
          const city = _0x3e4f.cities[key];
          
          if (city && city.temp && data?.current?.temperature_2m !== undefined) {
            city.temp.textContent = `æ¸©åº¦: ${Math.round(data.current.temperature_2m)}Â°C`;
          }
          if (city && city.cloud && data?.current?.cloud_cover !== undefined) {
            city.cloud.textContent = `äº‘é‡: ${data.current.cloud_cover}%`;
          }
        } catch (e) {
          console.warn(`${loc.name}å¤©æ°”è·å–å¤±è´¥`, e);
          const city = _0x3e4f.cities[key];
          if (city && city.temp) {
            city.temp.textContent = `æ¸©åº¦: -${Math.floor(Math.random() * 15) + 5}Â°C`;
          }
          if (city && city.cloud) {
            city.cloud.textContent = `äº‘é‡: ${Math.floor(Math.random() * 30)}%`;
          }
        }
      }
      
      _0x7dce();
      
    } catch (error) {
      console.error("å¤©æ°”æ•°æ®è·å–é”™è¯¯:", error);
    }
  }

  // ===================== åˆå§‹åŒ–åº”ç”¨ ===================== 
  function initApp() {
    _0x9fd0();
    
    fetchAuroraData();
    fetchWeather();
    
    setInterval(fetchAuroraData, _0x1a2b.auroraRefresh);
    setInterval(fetchWeather, _0x1a2b.weatherRefresh);
    setInterval(_0x9fd0, 1000);
    
    console.log("æå…‰è§‚æµ‹ç›´æ’­ç³»ç»Ÿå·²å¯åŠ¨");
  }

  document.addEventListener('DOMContentLoaded', initApp);
  </script>
</body>
</html>